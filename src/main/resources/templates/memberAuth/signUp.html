<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments/config :: configFragment"/>
    <body>
        <header th:replace="fragments/header :: headerFragment"></header>

        <div class="limiter">
            <div class="container-login100" style="background-image: url('../../static/images/bg-01.jpg');">
                <div class="wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54">
                    <!--/*@thymesVar id="memberForm" type=""*/-->
                    <form class="login100-form validate-form" action="/api/member/signup" th:object="${memberForm}" method="post">
                        <!--                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
                        <span class="login100-form-title p-b-49">회원가입</span>

                        <div class="form-group">
                            <label th:for="name">이름</label>
                            <input type="text" th:field="*{name}" class="form-control"
                                   placeholder="이름을 입력해주세요"
                                   th:class="${#fields.hasErrors('name')}? 'form-control fieldError' : 'form-control'" required>
                        </div>

                        <div class="form-group">
                            <label th:for="email">이메일</label>
                            <input type="email" th:field="*{email}" class="form-control"
                                   id="user_email" placeholder="이메일을 입력해주세요 ('@' 포함해주세요)" required>
                            <div class="check_font" id="email_check"></div>
                        </div>

                        <div class="form-group">
                            <label th:for="password">비밀번호</label>
                            <input type="password" th:field="*{password}" class="form-control"
                                   placeholder="비밀번호를 입력해주세요" required>
                        </div>

                        <div class="form-group">
                            <label th:for="phone">전화번호</label>
                            <input type="text" th:field="*{phone}" class="form-control"
                                   maxlength="11" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                   placeholder="전화번호를 입력해주세요 (숫자만 입력해주세요)" required>
                        </div>

                        <div class="form-group">
                            <label th:for="birth">생일</label>
                            <input type="date" th:field="*{birth}" class="form-control"
                                   placeholder="생일을 입력해주세요" required>
                        </div>

                        <div class="form-group">
                            <label th:for="zipcode">우편번호</label>
                            <div class="form-inline form-group">
                                <input type="text" th:field="*{zipcode}" class="form-control" id="sample6_postcode" placeholder="우편번호" required>
                                &nbsp;&nbsp;&nbsp;
                                <input type="button" onclick="sample6_execDaumPostcode()"
                                       class="btn btn-info" value="우편번호 검색"><br>
                            </div>
                        </div>

                        <div class="form-group">
                            <label th:for="city">주소</label>
                            <input type="text" th:field="*{city}" class="form-control" id="sample6_address" placeholder="주소" required><br>
                            <label th:for="street">상세주소</label>
                            <input type="text" th:field="*{street}" class="form-control" id="sample6_detailAddress" placeholder="상세주소" required>

                        </div>
                        <br/>

                        <div class="container-login100-form-btn">
                            <div class="wrap-login100-form-btn">
                                <div class="login100-form-bgbtn"></div>
                                <button class="login100-form-btn" type="submit">
                                    회원가입
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>


        <div id="dropDownSelect1"></div>
        <script>
            // 아이디 유효성 검사(1 = 중복 / 0 != 중복)
            $("#user_email").blur(function() {
                // id = "id_reg" / name = "userId"
                var user_email = $('#user_email').val();
                $.ajax({
                    url : '${pageContext.request.contextPath}/member/idCheck?userId='+ user_email,
                    type : 'get',
                    success : function(data) {
                        console.log("1 = 중복o / 0 = 중복x : "+ data);

                        if (data == 1) {
                            // 1 : 아이디가 중복되는 문구
                            $("#email_check").text("사용중인 아이디입니다 :p");
                            $("#email_check").css("color", "red");
                            $("#reg_submit").attr("disabled", true);
                        } else {
                            $("#email_check").text("");
                            $("#reg_submit").attr("disabled", false);
                        }
                    }, error : function() {
                        console.log("실패");
                    }
                });
            });
        </script>


        <!--===============================================================================================-->
        <script src="../../static/vendor/jquery/jquery-3.2.1.min.js"></script>
        <!--===============================================================================================-->
        <script src="../../static/vendor/animsition/js/animsition.min.js"></script>
        <!--===============================================================================================-->
        <script src="../../static/vendor/bootstrap/js/popper.js"></script>
        <script src="../../static/vendor/bootstrap/js/bootstrap.min.js"></script>
        <!--===============================================================================================-->
        <script src="../../static/vendor/select2/select2.min.js"></script>
        <!--===============================================================================================-->
        <script src="../../static/vendor/daterangepicker/moment.min.js"></script>
        <script src="../../static/vendor/daterangepicker/daterangepicker.js"></script>
        <!--===============================================================================================-->
        <script src="../../static/vendor/countdowntime/countdowntime.js"></script>
        <!--===============================================================================================-->
        <script src="../../static/js/main.js"></script>

        <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
        <script src="../static/js/postcode-api.js"></script>

        <footer th:replace="fragments/footer :: footerFragment"></footer>
    </body>
</html>
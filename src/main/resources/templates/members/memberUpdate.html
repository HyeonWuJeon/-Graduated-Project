<!--<!DOCTYPE HTML>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->

<!--<div class="container">-->
<!--    <div th:replace="fragments/bodyHeader :: bodyHeader"></div>-->
<!--    <h1>게시글 수정</h1>-->
<!--</div>-->
<!--</head>-->
<!--<body>-->
<!--    <div class="col-md-12">-->
<!--        <div class="col-md-4">-->
<!--&lt;!&ndash;            <a th:href = "@{/member/update/{id}(id = ${member.id})}"></a>&ndash;&gt;-->
<!--&lt;!&ndash;            <form role="form" action="@{/api/member/update/${member.id}" th:object="${member}"&ndash;&gt;-->
<!--&lt;!&ndash;                      method="put">&ndash;&gt;-->
<!--            <form>-->
<!--                <div class="form-group">-->
<!--                    <label th:for="id">회원번호</label>-->
<!--                    <input type="text" th:field="${member.id}" id="ids"  class="form-control">-->
<!--                </div>-->
<!--                <div class="form-group">-->
<!--                    <div class="form-group">-->
<!--                        <label th:for="email">이메일</label>-->
<!--                        <input type="text" th:field="${member.email}" id="email" class="form-control">-->
<!--                    </div>-->
<!--                    <div class="form-group">-->
<!--                        <label th:for="name">이름</label>-->
<!--                        <input type="text" th:field="${member.name}"  id="name"  class="form-control">-->
<!--                    </div>-->
<!--                    <div class="form-group">-->
<!--                        <label th:for="phone">휴대폰번호</label>-->
<!--                        <input type="text" th:field="${member.phone}" id="phone"  class="form-control">-->
<!--                    </div>-->
<!--                </div>-->
<!--                <a href="/" role="button" class="btn btn-secondary">취소</a>-->

<!--                <a href="#" th:href="'javascript:update()'" class="btn btn-danger">수정</a>-->
<!--&lt;!&ndash;                <a href="#" th:href="'javascript:update(\''+ ${member.id} +'\',\''+ ${member.name} +'\', \''+ ${member.email} +'\',\''+ ${member.phone} +'\')'" class="btn btn-danger">수정</a>&ndash;&gt;-->
<!--                <a href="#" th:href="'javascript:Delete()'" class="btn btn-danger">삭제</a>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->

<!--    <div th:replace="fragments/footer :: footer"></div>-->


<!--    <script th:inline="javascript">-->

<!--        function update(){-->
<!--            var data ={-->
<!--                name: $('#name').val(),-->
<!--                email: $('#email').val(),-->
<!--                phone: $('#phone').val()-->
<!--            }-->

<!--            var id  = $('#ids').val();-->

<!--            $.ajax({-->
<!--                type: 'PUT',-->
<!--                url: '/api/member/update/'+ id,-->
<!--                dataType: 'json',-->
<!--                contentType: 'application/json; charset=utf-8',-->
<!--                data: JSON.stringify(data)-->
<!--            }).done(function() {-->
<!--                alert('수정되었습니다.');-->
<!--                window.location.href = '/';-->
<!--            }).fail(function (error) {-->
<!--                alert(JSON.stringify(error));-->
<!--            });-->
<!--        }-->


<!--        function Delete() {-->

<!--            var id = $('#ids').val();-->
<!--            console.log("id = "+id);-->
<!--            $.ajax({-->
<!--                type: 'DELETE',-->
<!--                url: '/api/member/delete/'+id,-->
<!--                dataType: 'json',-->
<!--                contentType:'application/json; charset=utf-8'-->
<!--            }).done(function() {-->
<!--                alert('사용자 정보가 삭제되었습니다.');-->
<!--                window.location.href = '/';-->
<!--            }).fail(function (error) {-->
<!--                alert(JSON.stringify(error));-->
<!--            });-->
<!--        }-->

<!--    </script>-->

<!--    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>-->
<!--    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/config :: configFragment" />
<body>
<header th:replace="fragments/header :: headerFragment"></header>

<div class="limiter">
    <div class="container-login100" style="background-image: url('../../static/images/bg-01.jpg');">
        <div class="wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54">
            <form class="login100-form validate-form">
                <span class="login100-form-title p-b-49">정보수정</span>

                <input type="text" id="memberId" th:field="${member.id}" hidden="true">

                <div class="form-group">
                    <label th:for="name">이름</label>
                    <input type="text" id="memberName" th:field="${member.name}" class="form-control" readonly required>
                </div>

                <div class="form-group">
                    <label th:for="email">이메일</label>
                    <input type="email" id="memberEmail" th:field="${member.email}" class="form-control" readonly required>
                </div>

                <div class="form-group">
                    <label th:for="password">비밀번호</label>
                    <input type="password" id="memberPassword" th:field="${member.password}" class="form-control" required>
                </div>

                <div class="form-group">
                    <label th:for="phone">전화번호</label>
                    <input type="text" id="memberPhone" th:field="${member.phone}" class="form-control"
                           maxlength="11" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');" required>
                </div>

                <div class="form-group">
                    <label th:for="birth">생일</label>
                    <input type="date" id="memberBirth" th:field="${member.birth}" class="form-control" readonly required>
                </div>

                <div class="form-group">
                    <label th:for="zipcode">우편번호</label>
                    <div class="form-inline form-group">
                        <input type="text" id="memberZipcode" th:field="${member.address.zipcode}" class="form-control" id="sample6_postcode" placeholder="우편번호" readonly required>
                        <input type="button" onclick="sample6_execDaumPostcode()"
                               class="btn btn-info" value="우편번호 검색"><br>
                    </div>
                </div>

                <div class="form-group">
                    <label th:for="city">주소</label>
                    <input type="text" id="memberCity" th:field="${member.address.city}" class="form-control" id="sample6_address" placeholder="주소" readonly required><br>
                    <label th:for="street">상세주소</label>
                    <input type="text" id="memberStreet" th:field="${member.address.street}" class="form-control" id="sample6_detailAddress" placeholder="상세주소" required>
                    <!--
                    <input type="text" id="sample6_extraAddress" class="form-control" placeholder="참고항목" required></br>
                    -->
                </div>
                <br/>

                <div class="container-login100-form-btn">
                    <div class="wrap-login100-form-btn">
                        <div class="login100-form-bgbtn"></div>
                        <a th:href="'javascript:update()'" class="login100-form-btn">수정하기</a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>


<div id="dropDownSelect1"></div>

<!--===============================================================================================-->
<script src="../../static/vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="../../static/vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="../../static/vendor/bootstrap/js/popper.js"></script>
<script src="../../static/vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="../../static/vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
<script src="../../static/vendor/daterangepicker/moment.min.js"></script>
<script src="../../static/vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="../../static/vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
<script src="../../static/js/main.js"></script>
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="../static/js/postcode-api.js"></script>

<footer th:replace="fragments/footer :: footerFragment"></footer>

<script th:inline="javascript">
    function update() {
        var data = {                                // 이름, 이메일, 생일 변경 불가
            password: $("#memberPassword").val(),     // 비밀번호, 전화번호, 주소, 상세주소, 참고항목 변경 가능
            phone: $("#memberPhone").val(),
            zipcode: $("#memberZipcode").val(),
            city: $("#memberCity").val(),
            street: $("#memberStreet").val()
        };

        var id = $("#memberId").val();

        $.ajax({
            type: 'PUT',
            url: '/api/member/settings/' + id,
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(data)
        }).done(function() {
            alert('정보수정 되었습니다!');
            window.location.href = "/member/settings/" + id;
        }).fail(function(request, status, error) {
            alert(JSON.stringify(error));
            window.location.href = "/member/settings/" + id;
            alert("code: " + request.status + "\n" + "message: " + request.responseText + "\n" + "error: " + error);
        });

        console.log(data);
    }
</script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</body>
</html>